---
title: DDD (Domain-Driven Design) 领域驱动设计
categories: 理论方法
---

# 名词解释

DDD是一套综合软件系统分析和设计的面向对象建模方法，与此相似的工程方法还有 RUP（统一建模语言）。DDD解决的问题是应用复杂问题下的建模问题。

开发团队和领域专家（业务专家）一起通过通用语言(Ubiquitous Language)去理解和消化领域知识，从领域知识中提取和划分为一个一个的子领域（核心子域，通用子域，支撑子域），并在子领域上建立模型，再重复以上步骤，这样周而复始，构建出一套符合当前领域的模型。

在这个过程中有一个很重要的方法就是糊墙，又叫 EventStorming。


## 统一语言

通用语言是一个很泛的概念，它作为一种沟通工具，在开发团队内部，开发团队与领域专家之间使用。它包含了自然语言、文档和图表（不一定是标准的UML图，只要能表达出领域知识的都可以）等内容。对通用语言中名词，动词的使用需要认真考量，因为这些名词和动词会作为后面模型的指导命名。

统一语言本质上是在领域设计时候，预先定义下系统中出现的概念、名词以及解释。

例如在一个报销系统中，报销单据的提交前端和业务人员使用了ticket、后端应用使用了 bill，数据库如果也是用了其他的名词，在多团队、微服务设计下势必会造成混乱。

再比如在电商系统中，订单这个概念会指普通订单、支付订单、售后订单，如果只是使用 order 又会造成混乱，统一语言的目的是预先定义出领域概念。

- 订单 order
- 支付单 payment
- 售后单 ticket

解决统一语言的问题：

- 在白板上表达您的业务领域
- 定义开发所有术语的词汇表
- 领域专家和开发人员可以使用Event Storming实现业务流程学习的快速循环

## 战略设计

它也称为战略建模，它是DDD的支柱，其主要目标是与整个项目团队（领域专家和技术团队）一起定义有界上下文，统一的无所不在语言和上下文映射。

### 有界上下文/限界上下文

有界上下文是DDD最重要的概念之一，我们可以说这是应用领域模型表达的概念上的限制。当您尝试为大型领域建模时，您将遇到很大的困难，因为不同的人群将使用稍微不同的术语和句子来表达这些领域知识和概念，使用有界上下文，可以让人们明白：在当前上下文之外使用相同的词汇表却可能意味着不同的东西。

我们可以说，有界上下文主要是语言划界，正如[ Vaughn Vernon ]在他的书中所说的那样。重要的是要理解每个有界上下文都有自己的无所不在语言。

随着模型的发展，您将感觉需要在有界上下文之间创建关系，为此我们将使用上下文映射。

### 上下文映射​​​​​​​

上下文映射有助于理解整个项目，能够显示不同的有界上下文之间的关系。理解有界上下文之间的关系非常重要，这样您就可以正确地构建域模型。

有几种方法可以关联有界上下文：

- 共享内核：两个或多个团队之间的共享上下文，可减少代码重复，但是，任何更改都必须在团队之间进行组合和通知。
- 客户/供应商：它是客户端（下游）和服务器（上游）之间的关系，团队处于持续集成状态。
- 循规蹈矩Conformist：这是涉及上游和下游团队的情景，但在此模型中，上游团队没有动力满足下游团队的需求。
- 伙伴：这是团队依赖并需要建立合作关系的场景，以便他们能够满足两个系统的开发需求。
- 反腐败层：在这种情况下，客户端（下游）创建与上游上下文通信的中间层，以满足其自己的域模型。
- 还有其他集成模型，如开放主机服务Published Language，发布语言，分离方式Separate Ways。

## 战术设计


### 实体

一个实体是一个潜在的可变对象，它具有一个唯一的标识符。实体在其域模型中具有自己的生命周期，这使您可以获取此实体的整个变化的历史记录。

### 值对象

区分值对象与实体的区别在于，值对象是不可变的，并且没有唯一标识，仅由其属性的值定义。这种不变性的结果是，为了更新值对象，您必须创建一个新实例来替换旧实例。

### 聚合Aggregates

它是战术设计中最重要和最复杂的模式之一，聚合基于另外两个战术标准，即实体和值对象。聚合是一种或多种的群集实体，并且还可以包含值对象。此群集的父实体接收聚合根的名称。

### 服务

服务是无状态对象，它们执行一些不适合实体或值对象上的操作的逻辑。它们执行特定于域的操作，这可能涉及多个域对象。

### 库Repository

存储库主要用于处理存储，它们抽象了对数据存储的依赖担忧。他们负责持久聚合。

### 工厂

工厂用于在构造Object时提供抽象，并且可以返回聚合根，实体或值对象。工厂是构建通过构造方法构建复杂的对象的替代方法。

### 事件

事件表示域中发生的重大事件，需要向属于域的其他利益相关者报告。Aggregates通常发布事件。

### 模块

开发人员很少提及模块，但是它们的使用非常有趣。模块帮助我们隔离概念，可以定义为Java包或C＃命名空间，并始终遵循泛在语言。

## Eventstorming 




## 子域的种类

- 核心子域
- 通用子域 （特殊的支撑子域）
- 支撑子域

