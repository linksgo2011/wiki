---
title: 团队琐事：release、hotfix 和 oncall
categories: team
toc: true
---

一些开发团队没有专门的运维人员，研发运维都是团队自己来完成。

上线、生产环境的问题修复、紧急问题的响应，这些琐碎的事情会让消耗团队大量的精力和时间，如果不安排好工作方式和负责人，会造成大家凭积极性一拥而上，然后一哄而散的局面。

## 1. 概念

**release**。版本发布，一般都是一个迭代一次，也就是两周一次。会伴随着着功能的更新和缺陷的修复，小米公司的 MIUI 做到了数年的每个迭代的发布，备受好评。按迭代发布的好处是，团队获得了一种节奏感，不紧不慢的可持续发展。一般会使用代码分支测试、发布，并创建 tag 来管理版本。

**hotfix**。如果遇到生产环境的问题，需要立即处理并机动的发布，这种行为就是 hotfix。hotfix 需要在 release 的分支中修复、测试、发布，并且记得合并回 master 分支，否则下次 release 会丢失更改。

**oncall**。发布后，可能会有一些问题，需要有人值守处理反馈。负责 oncall 的人员需要分析问题，并找到合适的人来处理，尤其是节假日，oncall 的工作变得非常重要。


## 2. 人员安排

如果是一个敏捷团队，建议 release、hotfix 和 oncall 使用同一班人马，这些人员在团队内轮流参与：

- 一位 deveops 人员：负责发布的变更执行，比如操作数据库备份、配置的变更、执行数据迁移脚本、流水线的触发等工作。
- 一位值守的开发人员：负责处理发布后再遇到的问题，能快速修复的问题，尝试快速修复。如果是前后端分离的开发模式，需要前后端的开发人员一起参与。
- 一位测试人员：负责预发环境的测试，和发布后的测试。
- 一位产品经理：负责和测试人员一起的验收测试，一起在发布时对出现的问题严重程度定级。如果过于严重，是否需要停止发布。

发布后的一个迭代内，这些人员需要继续负责 hotfix、oncall，直到下一次发布截止。这样计划的好处是，这些人有同样的上下文，也不不必为这些活动分开计划人员。

### 3. release 注意事项



## 4. hotfix 注意事项



## 5. oncall 注意事项



